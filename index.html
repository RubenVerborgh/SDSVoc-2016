<!DOCTYPE html>
<html lang="en">
<head>
  <title>Your JSON is not my JSON</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="styles/screen-16x10.css">
  <link rel="stylesheet" href="styles/custom.css">
</head>
<body class="shower list">
  <header class="caption">
    <h1>Your JSON is not my JSON</h1>
    <h2>A case for more fine-grained content negotiation</h2>
    <p>
      <a href="https://ruben.verborgh.org/">Ruben Verborgh</a>,
      <a href="http://www.ugent.be/">Ghent University</a> –
      <a href="http://www.imec.be/">imec</a>
    </p>
    <p class="venue"><a href="https://www.w3.org/2016/11/sdsvoc/">Smart Descriptions &amp; Smarter Vocabularies (SDSVoc)</a>, 1 December 2016</p>
    <p>
      Read the <a href="https://ruben.verborgh.org/articles/fine-grained-content-negotiation/">accompanying article</a>.
    </p>
  </header>

  <div class="title slide" id="title">
    <h2>Your JSON is not my JSON</h2>
    <h3>A case for more fine-grained content negotiation</h3>
    <p class="author">Ruben Verborgh</p>
    <p class="affiliation">Ghent University – imec</p>
  </div>

  <div class="slide" id="where">
    <h2 class="shout">What is the location of SDSVoc?</h2>
  </div>

  <div class="slide" id="by-public-transport">
    <h2>What is the location of SDSVoc<br> by public transport?</h2>
    <ul class="instructions">
      <li>Take Sprinter 4627 at 8:40</li>
      <li>Get off at Amsterdam Science Park at 8:48</li>
      <li>Cross the street (Carolina MacGillavrylaan) at the crosswalk</li>
      <li>Walk past the building of Amsterdam University College</li>
      <li>You will be able to see CWI’s main entrance on your left</li>
    </ul>
  </div>

  <div class="slide" id="by-car">
    <h2>What is the location of SDSVoc<br> by car?</h2>
    <ul class="instructions">
      <li>Exit the A10 ringroad at S113/Watergraafsmeer</li>
      <li>Follow the Science Park signs directing you to the Kruislaan</li>
      <li>Turn left onto the Carolina MacGillavrylaan after passing through the railroad tunnel</li>
      <li>Take the Science Park entry at your right and enter the gate</li>
    </ul>
  </div>

  <div class="slide" id="on-foot">
    <h2>What is the location of SDSVoc<br> on foot?</h2>
    <ul class="long instructions">
      <li>Head southwest on Westtunnel toward Stationsplein</li>
      <li>Slight right onto Stationsplein</li>
      <li>Sharp left to stay on Stationsplein</li>
      <li>Turn right toward Kamperbrug</li>
      <li>Turn right onto Kamperbrug</li>
      <li>Turn left onto Prins Hendrikkade</li>
      <li>Turn right onto Kadijksplein</li>
      <li>Turn left to stay on Kadijksplein</li>
      <li>Continue onto Hoogte Kadijk</li>
      <li>Turn left onto Sarphatistraat</li>
      <li>Turn right onto Zeeburgerstraat</li>
      <li>Continue onto Pontanusstraat</li>
      <li>Turn left onto Eerste van Swindenstraat/Javastraat</li>
      <li>Turn right onto Celebesstraat</li>
      <li>Keep right to stay on Celebesstraat</li>
      <li>Turn right at Valentijnkade</li>
      <li>Turn right toward Ooster Ringdijk</li>
      <li>Turn left onto Ooster Ringdijk</li>
      <li>Continue onto Carolina MacGillavrylaan</li>
    </ul>
  </div>

  <div class="slide" id="location">
    <h2>
      Independently of my preferences,<br>
      SDSVoc is located at the same address.
    </h2>
    <p class="next address">
      Science Park 123<br>
      1098 XG Amsterdam<br>
      Netherlands
    </p>
  </div>

  <div class="slide" id="different-address">
    <h2 class="shout">
      Why not always use<br>
      the <em>same</em> address?
    </h2>
  </div>

  <div class="slide" id="exactly">
    <h2 class="shout">Exactly.</h2>
  </div>

  <div class="slide" id="necessity">
    <h2 class="shout">
      Content negotiation is not an academic exercise,<br>
      <span class="next">but rather a necessity for sustainable publication.</span>
    </h2>
  </div>

  <div class="slide" id="goal">
    <h2 class="shout">
      How can a single address<br>
      give access to data<br>
      my client understands?
    </h2>
  </div>

  <div class="toc slide" id="toc">
    <h2>Your JSON is not my JSON</h2>
    <ul>
       <li><a href="#toc-conneg">HTTP content negotiation</a></li>
       <li><a href="#toc-mime">Limitations of MIME types</a></li>
       <li><a href="#toc-profiles">Profile-based content negotiation</a></li>
    </ul>
  </div>

  <div class="toc slide" id="toc-conneg">
    <h2>Your JSON is not my JSON</h2>
    <ul>
       <li class="current"><a href="#toc-conneg">HTTP content negotiation</a></li>
       <li><a href="#toc-mime">Limitations of MIME types</a></li>
       <li><a href="#toc-profiles">Profile-based content negotiation</a></li>
    </ul>
  </div>

  <div class="slide" id="example">
    <h2>
      As an example, we will use a dataset<br>
      of <a href="http://pieter.pm/iswc2016-demo-lbld/">local governmental decisions</a>.
    </h2>
    <p>This involves resources such as:
    <ul>
      <li>people</li>
      <li>places</li>
      <li>institutions</li>
      <li>laws &amp; decrees</li>
    </ul>
  </div>

  <div class="slide" id="sustainability">
    <h2>
      The challenge is to expose this dataset<br>
      in a sustainable way.
    </h2>
    <ul>
      <li>backward compatibility
        <ul>
          <li class="next">Applications using today's entry points<br> should work in the future.</li>
        </ul>
      </li>
      <li>forward compatibility
        <ul>
          <li class="next">Entry points of the future<br> should not break today's applications.</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="url">
    <h2>
      Domain resources are identified<br>
      by specific URLs.
    </h2>
    <p>This URL identifies a local council decision:</p>
    <ul>
      <li><code>https://council.my/decisions/3147/</code></li>
    </ul>
  </div>

  <div class="slide" id="representation-urls">
    <h2>
      Each representation of a resource<br>
      can also be identified with a specific URL.
    </h2>
    <ul>
      <li><code>https://council.my/decisions/3147.html</code></li>
      <li><code>https://council.my/decisions/3147.json</code></li>
      <li><code>https://api.council.my/decisions.php?id=3147&amp;format=xml</code></li>
      <li>…</li>
    </ul>
  </div>

  <div class="slide" id="representation-urls-problems">
    <h2>
      Minting <em>only</em> representations-specific URLs<br>
      leads to several problems.
    </h2>
    <ul>
      <li>sustainability
        <ul>
          <li class="next">How long will the XML URL exist?</li>
        </ul>
      </li>
      <li>extensibility
        <ul>
          <li class="next">What URLs will be minted for new formats?</li>
        </ul>
      </li>
      <li>interoperability
        <ul>
          <li class="next">Do clients using <em>different</em> URLs talk about the <em>same</em> thing?</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="representation-independent-url">
    <h2>
      Each resource should always have<br>
      a representation-independent URL.
    </h2>
    <ul>
      <li><strong>mandatory:</strong> URL for the decision resource
        <ul>
          <li><code>https://council.my/decisions/3147/</code></li>
        </ul>
      </li>
      <li class="next"><strong>optional:</strong> URLs for representations of the resource
        <ul>
          <li><code>https://council.my/decisions/3147.json</code></li>
          <li><code>https://council.my/decisions/3147.ttl</code></li>
          <li><code>https://council.my/decisions/en/3147.xml</code></li>
          <li>…</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="conneg-request">
    <h2>
      Using <em>HTTP content negotiation</em>,<br>
      clients send representation preferences.
    </h2>
    <h3>request</h3>
<pre><code>GET /decisions/3147.json HTTP/1.1
Host: council.my
Accept: application/ld+json;q=1.0,text/turtle;q=0.8
Accept-Language: en
…
</code></pre>
  </div>

  <div class="slide" id="conneg-response">
    <h2>
      Using <em>HTTP content negotiation</em>,<br>
      servers send a matching representation.
    </h2>
    <h3>response</h3>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/ld+json
Content-Language: en
…
</code></pre>
  </div>

  <div class="slide" id="conneg-sustainable">
    <h2>
      Content negotiation allows for<br>
      sustainable data publication.
    </h2>
    <ul>
      <li>sustainability
        <ul>
          <li class="next">The identifiers remain constant.</li>
        </ul>
      </li>
      <li>extensibility
        <ul>
          <li class="next">New MIME types can be added.</li>
        </ul>
      </li>
      <li>interoperability
        <ul>
          <li class="next">Clients consuming different representations<br>
            use the <em>same</em> URL for the <em>same</em> resource.</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="toc slide" id="toc-mime">
    <h2>Your JSON is not my JSON</h2>
    <ul>
       <li><a href="#toc-conneg">HTTP content negotiation</a></li>
       <li class="current"><a href="#toc-mime">Limitations of MIME types</a></li>
       <li><a href="#toc-profiles">Profile-based content negotiation</a></li>
    </ul>
  </div>

  <div class="slide" id="underspecification">
    <h2>
      MIME types are an <em>underspecification</em><br>
      of the interpretation clients need.
    </h2>
    <p>MIME types underspecify on:
    <ul>
      <li>the <a href="#underspecification-syntax">syntactical level</a></li>
      <li>the <a href="#underspecification-structure">structural level</a></li>
      <li>the <a href="#underspecification-model">modeling level</a></li>
    </ul>
  </div>

  <div class="slide" id="underspecification-syntax">
    <h2>
      A MIME type does not indicate<br>
      the most specific <em>syntax</em>.
    </h2>
    <p><code>3147.json</code> is all of these:</p>
    <ul>
      <li class="next"><code>application/octet-stream</code></li>
      <li class="next"><code>application/json</code></li>
      <li class="next"><code>application/ld+json</code></li>
    </ul>
  </div>

  <div class="slide" id="underspecification-structure">
    <h2>
      A MIME type does not indicate<br>
      the <em>structure</em> within the syntax.
    </h2>
    <ul>
      <li>The JSON MIME type allows many structures.
        <ul>
          <li class="next">Yet API clients typically <em>assume</em> a very specific structure.</li>
        </ul>
      </li>
      <li class="next">RDF formats are immune to this.
        <ul>
          <li>All possible serializations represent the same graph.</li>
        </ul>
      </li>
      <li class="next">JSON-LD is especially tricky in this regard.
        <ul>
          <li class="next">When interpreted as <em>RDF triples</em>, structure is unimportant.</li>
          <li class="next">When interpreted as a <em>JSON tree</em>, framing is crucial.</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="underspecification-model">
    <h2>
      A MIME type does not indicate<br>
      how a representation is <em>modeled</em>.
    </h2>
    <ul>
      <li class="next"><strong>Non-semantic formats:</strong> identical structures<br>
          can still have different meanings.
        <ul>
          <li>JSON doesn't specify an interpretation.</li>
        </ul>
      </li>
      <li class="next"><strong>Semantic formats:</strong> the same meaning<br>
          can be expressed with different vocabularies.
        <ul>
          <li>Matching them requires reasoning and/or ontologies.</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="more-specific-mime-types">
    <h2>
      Should we simply introduce<br>
      more specific MIME types then?
    </h2>
    <p>
      A council decision could have MIME type
      <code>application/vnd.council.my.decision+json</code>
    </p>
    <ul>
      <li class="next">unclear what parser to use</li>
      <li class="next">highly application-specific</li>
      <li class="next">finite extensibility</li>
    </ul>
  </div>

  <div class="slide" id="rdf-specific-mime-types">
    <h2>
      Especially with RDF syntaxes,<br>
      specific MIME types become problematic.
    </h2>
    <p class="next"><code>text/vnd.council.my.decision+turtle</code></p>
    <p class="next"><code>application/vnd.council.my.decision+ld+json</code></p>
    <p class="next"><code>application/vnd.foaf.person+ld+json</code></p>
    <p class="next scroll"><code>application/vnd.council.my.decision.foaf.person+ld+json</code></p>
  </div>

  <div class="slide" id="rdf-multiple-models">
    <h2>
      Since RDF is self-descriptive,<br>
      can representations use multiple models?
    </h2>
    <ul>
      <li class="next">responses become large</li>
      <li class="next">modeling choices remain uncertain
        <ul>
          <li class="next">If no <code>foaf:Person</code> instances exist,<br>
            are there no people, or was another vocabulary used?
        </ul>
      </li>
      <li class="next">some models might be incompatible
        <ul>
          <li>Schema.org is great for discovery,<br>
            but has (purposely) sloppy semantics.
        </ul>
      </li>
    </ul>
  </div>

  <div class="toc slide" id="toc-profiles">
    <h2>Your JSON is not my JSON</h2>
    <ul>
       <li><a href="#toc-conneg">HTTP content negotiation</a></li>
       <li><a href="#toc-mime">Limitations of MIME types</a></li>
       <li class="current"><a href="#toc-profiles">Profile-based content negotiation</a></li>
    </ul>
  </div>

  <div class="slide" id="conneg-extensibility">
    <h2>
      HTTP Content negotiation is extensible<br>
      in multiple dimensions.
    </h2>
    <ul>
      <li>HTTP spec defines several dimensions.
        <ul class="inline">
          <li><code>Content-Type</code></li>
          <li><code>Content-Language</code></li>
          <li>…</li>
        </ul>
      </li>
      <li class="next">Other dimensions have been proposed.
        <ul>
          <li>The <a href="https://tools.ietf.org/rfc/rfc7089">Memento protocol</a> negotiates over time.
            <ul>
              <li>client: <code>Accept-Datetime</code></li>
              <li>server: <code>Memento-Datetime</code></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="profiles">
    <h2>
      Since MIME types are limited,<br>
      we should negotiate in more dimensions.
    </h2>
    <p>
      A <a href="https://tools.ietf.org/rfc/rfc6906">profile</a>
      can be defined as:
    </p>
    <blockquote>
      <p class="next">
        …<strong>additional semantics</strong>
        that can be used to process a resource representation,
        such as <strong>constraints, conventions, extensions,</strong>
        or any other aspects that do not alter the basic media type semantics…
      </p>
      <cite><a href="https://tools.ietf.org/rfc/rfc6906">RFC 6906</a></cite>
    </blockquote>
  </div>

  <div class="slide" id="server-profile">
    <h2>
      Servers indicate what profiles<br>
      a representation uses.
    </h2>
    <ul>
      <li>
        as <code>profile</code> parameter of <code>Content-Type</code> header
        <ul>
          <li class="next">MIME type indicates which parser to use</li>
          <li class="next">profile indicates structure and model</li>
        </ul>
      </li>
      <li class="next">or using the <a href="https://tools.ietf.org/rfc/rfc5988"><code>Link</code> header</a>
        with <a href="https://tools.ietf.org/rfc/rfc6906"><code>rel=profile</code></a>
      </li>
      <li class="next">multiple profiles can be combined
        <ul class="next">
          <li>“has this JSON-LD context”</li>
          <li>“uses FOAF for people”</li>
          <li>“uses Wikidata for places”</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="client-profile">
    <h2>
      Clients indicate what profiles<br>
      they support or prefer.
    </h2>
    <ul>
      <li>
        by adding <code>profile</code> parameter(s) to <code>Accept</code>
        <ul>
          <li class="next">might lead to combinatorial explosion</li>
        </ul>
      </li>
      <li class="next">
        through a new <code>Accept-Profile</code> header
        <ul>
          <li>would need to be standardized</li>
        </ul>
      </li>
      <li class="next">
        profiles can be cumulative
        <ul>
          <li>other negotiation dimensions typically mutually exclusive</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="activity-streams">
    <h2>
      <a href="https://www.w3.org/TR/activitystreams-core/"><em>Activity Streams</em></a>
      are an example<br> of a MIME-type/profile combination.
    </h2>
    <ul>
      <li>MIME-type: <code class="long">application/activity+json</code>
        <dl class="next">
          <dt>Activity Stream clients</dt>
          <dd>recognized as Activity Stream</dd>
          <dt>Other clients</dt>
          <dd>not recognized</dd>
        </dl>
      </li>
      <li>MIME-type: <code class="long">application/ld+json; profile="https://www.w3.org/ns/activitystreams"</code>
        <dl class="next">
          <dt>Activity Stream clients</dt>
          <dd>recognized as Activity Stream</dd>
          <dt>Other clients</dt>
          <dd>recognized as JSON-LD</dd>
        </dl>
      </li>
    </ul>
  </div>

  <div class="toc slide" id="review">
    <h2>Your JSON is not my JSON</h2>
    <ul>
       <li><a href="#toc-conneg">HTTP content negotiation</a></li>
       <li><a href="#toc-mime">Limitations of MIME types</a></li>
       <li><a href="#toc-profiles">Profile-based content negotiation</a></li>
    </ul>
  </div>

  <div class="slide" id="no-obligation">
    <h2 class="shout">
      I'm <em>not</em> suggesting that<br>
      we all <em>must</em> negotiate<br>
      over multiple dimensions.
    </h2>
  </div>

  <div class="slide" id="use-conneg">
    <h2 class="shout">
      I <em>am</em> suggesting that,<br>
      <span class="next"><em>if</em> you decide to publish multiple dimensions,<br></span>
      <span class="next">you <em>should</em> provide<br> content negotiation.</span>
    </h2>
  </div>

  <div class="slide" id="conclusion">
    <h2 class="shout">
      HTTP content negotiation<br>
      is the extensible path<br>
      towards sustainable content interoperability.
    </h2>
  </div>

  <div class="title slide" id="end">
    <h2>Your JSON is not my JSON</h2>
    <h3>A case for more fine-grained content negotiation</h3>
    <p class="author"><a href="https://twitter.com/RubenVerborgh">@RubenVerborgh</a></p>
    <p class="affiliation">Ghent University – imec</p>
  </div>

  <footer>
    <p class="badge"><a href="https://github.com/RubenVerborgh/SDSVoc-2016">Fork me on Github</a></p>
    <p>©2016 Ruben Verborgh – These slides are licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution–ShareAlike 4.0 International License</a>.</p>
  </footer>
  <script src="scripts/shower.min.js"></script>
</body>
</html>
